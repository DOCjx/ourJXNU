var Login=function(){jQuery.extend(jQuery.validator.messages,{required:"必选字段",remote:"请修正该字段",email:"请输入正确格式的电子邮件",url:"请输入合法的网址",date:"请输入合法的日期",dateISO:"请输入合法的日期 (ISO).",number:"请输入合法的数字",digits:"只能输入整数",creditcard:"请输入合法的信用卡号",equalTo:"请再次输入相同的值",accept:"请输入拥有合法后缀名的字符串",maxlength:jQuery.validator.format("请输入一个 长度最多是 {0} 的字符串"),minlength:jQuery.validator.format("请输入一个 长度最少是 {0} 的字符串"),rangelength:jQuery.validator.format("请输入 一个长度介于 {0} 和 {1} 之间的字符串"),range:jQuery.validator.format("请输入一个介于 {0} 和 {1} 之间的值"),max:jQuery.validator.format("请输入一个最大为{0} 的值"),min:jQuery.validator.format("请输入一个最小为{0} 的值")});var e=function(){$(".login-form").validate({rules:{user_no:{required:!0},password:{required:!0},remember:{required:!1}},messages:{user_no:{required:"<span style='color:#ff3c04;font-size:8px;'>用户名不可为空！</span>"},password:{required:"<span style='color:#ff3c04;font-size:8px;'>密码不可为空！</span>"}},submitHandler:function(e){var o=$.trim($('[name="user_no"]').val()),a=$.trim($('[name="password"]').val());$.ajax({url:$.U("System/HyStart/ajax?q=login"),data:{u:o,p:a},type:"POST",timeout:5e3,success:function(e){return e.status?void setTimeout(function(){location.href=$.U("System/Index/index")},100):($('[name="password"]').val("").focus(),alert(e.info),!1)},error:function(){actionAlert({status:!1,info:"登录失败，请重试！"},".login-form")}})}})},o=function(){$(".pwd-form").validate({rules:{hy_old_password:{required:!0},hy_new_password:{required:!0},hy_confirm_password:{required:!0,equalTo:"#hy_new_password"}},messages:{hy_old_password:{required:"<span style='color:#ff3c04;font-size:8px;'>旧密码不可为空！</span>"},hy_new_password:{required:"<span style='color:#ff3c04;font-size:8px;'>新密码不可为空！</span>"},hy_confirm_password:{required:"<span style='color:#ff3c04;font-size:8px;'>确认密码不可为空！</span>",equalTo:"<span style='color:#ff3c04;font-size:8px;'>两次输入密码不一致！</span>"}},submitHandler:function(e){var o=$(e).find(".modal-body"),a=crypto_sha1($.trim($('[name="hy_old_password"]').val())+$("#login-addon").val()),r=$.trim($('[name="hy_new_password"]').val()),t=$.trim($('[name="hy_confirm_password"]').val()),n=$(e).find("#pwd-submit").button("loading");$.ajax({url:$.U("User/ajax_save_pwd"),data:{o_p:crypto_aes(a,a.substr(5,32)),n_p:r,c_p:t},type:"POST",timeout:5e3,success:function(e){e.status?(o.html(e.info),$("#pwdModal").modal("toggle"),$("#pwdModal").on("click",function(){n.button("reset")}),$("#pwdModal #pwd-btn").on("click",function(){location.href=$.U("User/login")})):(o.html(e.info),$("#pwdModal").modal("toggle"),$("#pwdModal").on("click",function(){n.button("reset")}))},error:function(){o.html("数据请求失败，请重试！"),$("#pwdModal").modal("toggle"),$("#pwdModal #pwd-btn").on("click",function(){n.button("reset"),location.reload()})}})}})},a=function(){if(/msie\s[67]/.test(navigator.userAgent.toLowerCase())){var e=['<h3 class="text-danger">检测到您的浏览器不支持HTML5的某些功能，这会影响到您访问本站的体验。',"我们强烈推荐您使用Chrome内核（如最新版360安全浏览器、360极速浏览器、","猎豹浏览器等的极速模式、谷歌等）浏览器、火狐等现代浏览器登录系统！或者请您使用IE9.0以上版本访问本站！</h3>"].join("");alert(e)}};return{init:function(){a(),e(),o()}}}();