var Datatable=function(){var t,e,a,n,r,o,c={},s=[],i=function(){var t=$('tbody > tr > td:nth-child(1) input[type="checkbox"]:checked',a).size(),r=e.dataTable.language.txGroupActions,o=$(".dt-btm-actions .btn",n);t>0?(o.removeClass("disabled").each(function(){t>$(this).data("max")&&$(this).data("max")>0&&$(this).addClass("disabled")}),$(".table-btm-actions > span",n).text(r.replace("_TOTAL_",t))):(o.addClass("disabled"),$(".table-btm-actions > span",n).text(""))};return $.extend(!0,$.fn.DataTable.TableTools.classes,{container:"btn-group tabletools-wrapper",buttons:{normal:"btn btn-default btn-circle btn-sm hidden-xs"}}),{init:function(l){if($().dataTable){o=this,l=$.extend(!0,{src:"",loadingMessage:"正在载入数据...",dtBtmActions:"",dtSearchForm:"",dataTable:{dom:"<'row'<'col-md-12'T>><'row'<'col-md-12'<'table-search-form'>>r><'dt-responsive-wrapper't><'row'<'col-md-6 col-xs-12'<'table-btm-actions'>><'col-md-6 col-xs-12'<'pull-right'pli>>>",pageLength:10,language:{txGroupActions:"选中的 _TOTAL_ 条记录",txAjaxRequestGeneralError:"网络请求失败！请检查您的网络连接！",lengthMenu:"<span class='seperator'>|</span>每页显示 _MENU_ 条",info:"<span class='seperator'>|</span>共 _TOTAL_ 条记录",infoEmpty:"无记录！",emptyTable:"无记录！",zeroRecords:"未找到满足条件的记录！",paginate:{previous:"上一页",next:"下一页",last:"尾页",first:"第一页",page:"当前第",pageOf:"页 总页数"}},order:[0],pagingType:"bootstrap_extended",autoWidth:!1,processing:!1,serverSide:!0,deferRender:!0,ajax:{url:"",type:"post",timeout:50000,data:function(t){var n=l.hyall.getDtColumns();$.each(t,function(e,a){switch(e){case"order":a&&(t[e]={field:n[a[0].column].data,sort:a[0].dir});break;case"columns":delete t[e]}}),t.search={},c.action&&delete c.action,$.each(c,function(e,a){t.search[e]=a}),Metronic.blockUI({message:e.loadingMessage,target:a,cenrerY:!0,boxed:!0})},dataSrc:function(t){return 1===$(".group-checkable",a).size()&&($(".group-checkable",a).attr("checked",!1),$.uniform.update($(".group-checkable",a))),s=[],$.each(t.data,function(t,e){s.push(e._pk)}),Metronic.unblockUI(a),t.data},error:function(){$.actionAlert({status:!1,info:e.dataTable.language.txAjaxRequestGeneralError}),Metronic.unblockUI(a)}},drawCallback:function(t){Metronic.initUniform($('input[type="checkbox"]',a)),i()},columns:[]}},l),e=l,a=$(l.src),n=a.parents(".hy-table-container");var d=$.fn.dataTableExt.oStdClasses;$.fn.dataTableExt.oStdClasses.sWrapper=$.fn.dataTableExt.oStdClasses.sWrapper+" dataTables_extended_wrapper",$.fn.dataTableExt.oStdClasses.sLengthSelect="form-control input-xsmall input-sm input-inline",t=a.DataTable(e.dataTable),$.fn.dataTableExt.oStdClasses.sWrapper=d.sWrapper,$.fn.dataTableExt.oStdClasses.sLengthSelect=d.sLengthSelect,$(".table-btm-actions",n).html(e.dtBtmActions),$(".table-search-form",n).html(e.dtSearchForm),HyFrame.initAJAX(),$(".group-checkable",a).change(function(){var t=$('tbody > tr > td:nth-child(1) input[type="checkbox"]:not([disabled])',a),e=$(this).is(":checked");t.each(function(){$(this).attr("checked",e)}),$.uniform.update(t),i()}),a.on("change",'tbody > tr > td:nth-child(1) input[type="checkbox"]',function(){i()}),r=$(".table-search-form",n),r.on("click",".dt-search-submit",function(t){t.preventDefault(),o.submitFilter()}),r.on("keypress",".form-filter:text",function(t){if(13==t.which)return o.submitFilter(),!1})}},submitFilter:function(){$('textarea.form-filter, select.form-filter, input.form-filter:not([type="radio"],[type="checkbox"])',r).each(function(){o.setAjaxParam($(this).attr("name"),$(this).val())}),$('input.form-filter[type="checkbox"]:checked',r).each(function(){o.addAjaxParam($(this).attr("name"),$(this).val())}),$('input.form-filter[type="radio"]:checked',a).each(function(){o.setAjaxParam($(this).attr("name"),$(this).val())}),t.ajax.reload()},getSelectedRows:function(){var t=[];return $('tbody > tr > td:nth-child(1) input[type="checkbox"]:checked',a).each(function(){t.push(s[$(this).index('[type="checkbox"]')-1])}),t},setAjaxParam:function(t,e){c[t]=e},addAjaxParam:function(t,e){c[t]||(c[t]=[]),skip=!1;for(var a=0;a<c[t].length;a++)c[t][a]===e&&(skip=!0);skip===!1&&c[t].push(e)},clearAjaxParams:function(t,e){c={}},getDataTable:function(){return t},getTableContainer:function(){return n},countSelectedRecords:function(){i()},getHyPk:function(t){return s[t]}}};